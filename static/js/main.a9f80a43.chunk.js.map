{"version":3,"sources":["blogApi.js","Components/Comment.js","Components/NewComment.js","Components/Button.js","Components/MoreMenu.js","Components/Post.js","Components/User.js","Components/Login.js","Components/Switch.js","Components/Tiny.js","App.js","index.js"],"names":["axios","require","user","a","post","username","password","response","data","fetch","method","headers","Accept","Credentials","json","posts","token","title","text","isPublished","body","JSON","stringify","catch","err","console","log","message","postId","encodeURIComponent","postid","id","user_id","comments","Comment","author","date","useState","editable","setEditable","error","setError","inputText","setInputText","deleted","setDeleted","useContext","UserContext","className","defaultValue","onClick","e","target","form","value","updateComment","then","prev","finally","type","deleteComment","NewComment","setNewComment","saveComment","Button","label","MoreMenu","anchorEl","setAnchorEl","published","setPublished","open","Boolean","options","handleClose","event","innerText","updatePost","deletePost","IconButton","aria-label","aria-controls","aria-expanded","undefined","aria-haspopup","currentTarget","sx","color","Menu","MenuListProps","onClose","PaperProps","style","maxHeight","ITEM_HEIGHT","width","map","option","MenuItem","selected","Post","html","preview","setComments","newComment","loading","setLoading","showComments","setShowComments","useEffect","getComments","dangerouslySetInnerHTML","__html","length","comment","Date","updatedAt","_id","toDateString","User","setShow","xmlns","viewBox","fill","fillRule","d","clipRule","Login","setUser","setMesssage","setResponse","logInUser","preventDefault","logIn","resolve","allow","name","placeholder","Switch","bollean_click","checked","DEFAULT_TITLE","Tiny","setValue","setTitle","saveFlag","setSaveFlag","editorRef","useRef","current","setContent","action","onChange","apiKey","process","onInit","evt","editor","onEditorChange","newValue","init","height","menubar","plugins","toolbar","content_style","savePost","reject","React","createContext","isHtml","txt","DOMParser","parseFromString","document","createElement","innerHTML","decodeHtml","querySelector","App","setPosts","show","window","matchMedia","matches","theme","setTheme","getPosts","Provider","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.a9f80a43.chunk.js","sourcesContent":["const axios = require(\"axios\");\n// Create User (sign-up)\n// User = { username:, password:}\nasync function createUser(userInfo) {\n  const response = await fetch(`https://gentle-refuge-60877.herokuapp.com/v1/users/signup`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Credentials: \"include\",\n    },\n    body: JSON.stringify(userInfo),\n  });\n  const user = await response.json();\n\n  return user;\n}\n\n// Login to Blog-API and get user details\nasync function logIn(user) {\n  try {\n    const response = await axios.post(\"https://gentle-refuge-60877.herokuapp.com/v1/users/login\", {\n      username: user.username,\n      password: user.password,\n    });\n    return response.data;\n  } catch (err) {\n    return err;\n  }\n}\n\n// Logout\nasync function logOut() {\n  try {\n    const data = await fetch(\"https://gentle-refuge-60877.herokuapp.com/v1/users/logout\", {\n      method: \"POST\", // *GET, POST, PUT, DELETE, etc.\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"*/*\",\n        Credentials: \"include\",\n      },\n    });\n    const parsedData = await data.json();\n    return parsedData;\n  } catch (err) {\n    return err;\n  }\n}\n\n// Get user\nasync function getUser() {\n  try {\n    const response = await axios.get(\"https://gentle-refuge-60877.herokuapp.com/v1/users/user\", {\n      withCredentials: true,\n    });\n    console.log({ getUser: response });\n    return response.data;\n  } catch (err) {\n    return err;\n  }\n}\n// GET posts\nasync function getPosts() {\n  const response = await fetch(\"https://gentle-refuge-60877.herokuapp.com/v1/allPosts\", {\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Accept: \"*/*\",\n      Credentials: \"include\",\n    },\n  });\n  const posts = await response.json();\n\n  return posts;\n}\n// POST comments\nasync function savePost(token, title, text, isPublished) {\n  // prettier-ignore\n  const response = await fetch(\n    `https://gentle-refuge-60877.herokuapp.com/v1/posts`,\n    {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Accept\": \"*/*\",\n        \"Credentials\": \"true\",\n        \"Authorization\": \"Bearer \" + token,\n      },\n      body: JSON.stringify({\n        \"title\":title,\n        \"text\": text,\n        \"isPublished\":isPublished,\n      }),\n    }\n  ).catch( err => console.log(err));\n  const message = await response.json().catch((err) => console.log(err));\n\n  return message;\n}\n// POST comments\nasync function deletePost(token, postId) {\n  // prettier-ignore\n  const response = await fetch(\n    `https://gentle-refuge-60877.herokuapp.com/v1/posts/${postId}`,\n    {\n      method: \"DELETE\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Accept\": \"*/*\",\n        \"Credentials\": \"true\",\n        \"Authorization\": \"Bearer \" + token,\n      },\n    }\n  ).catch( err => console.log(err));\n  const message = await response.json().catch((err) => console.log(err));\n\n  return message;\n}\n// POST comments\nasync function updatePost(token, postId, isPublished) {\n  // prettier-ignore\n  const response = await fetch(\n    `https://gentle-refuge-60877.herokuapp.com/v1/posts/${postId}`,\n    {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Accept\": \"*/*\",\n        \"Credentials\": \"true\",\n        \"Authorization\": \"Bearer \" + token,\n      },\n      body: JSON.stringify({\n        \"isPublished\":isPublished,\n      }),\n    }\n  ).catch( err => console.log(err));\n  const message = await response.json().catch((err) => console.log(err));\n\n  return message;\n}\n\n// GET comments\nasync function getComments(postId, token) {\n  // prettier-ignore\n  const response = await fetch(\n    `https://gentle-refuge-60877.herokuapp.com/v1/comments/?postid=${encodeURIComponent(postId)}`,\n    {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"*/*\",\n        Credentials: \"include\",\n        \"Authorization\": \"Bearer \" + token,\n      },\n    });\n  return response.json();\n}\n\n// POST comments\nasync function saveComment(postid, token, text) {\n  // prettier-ignore\n  const response = await fetch(\n    `https://gentle-refuge-60877.herokuapp.com/v1/comments/?postid=${postid}`,\n    {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Accept\": \"*/*\",\n        \"Credentials\": \"true\",\n        \"Authorization\": \"Bearer \" + token,\n      },\n      body: JSON.stringify({\n        \"text\": text,\n      }),\n    }\n  ).catch( err => console.log(err));\n  const message = await response.json().catch((err) => console.log(err));\n\n  return message;\n}\n\n// PUT comments\nasync function updateComment(id, user, text) {\n  // prettier-ignore\n  const response = await fetch(\n    `https://gentle-refuge-60877.herokuapp.com/v1/comments/${id}/?username=${encodeURIComponent(user.username)}&password=${encodeURIComponent(user.password)}`,\n    {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Accept\": \"*/*\",\n      },\n      body: JSON.stringify({\n        \"text\": text,\n        \"author\": user.user_id\n      }),\n    }\n  ).catch( err => console.log(err));\n  const message = await response.json().catch((err) => console.log(err));\n\n  return message;\n}\n\n// DELETE comments\nasync function deleteComment(user, id) {\n  // prettier-ignore\n  const response = await fetch(\n    `https://gentle-refuge-60877.herokuapp.com/v1/comments/${encodeURIComponent(id)}/?username=${encodeURIComponent(user.username)}&password=${encodeURIComponent(user.password)}`,\n    {\n      method: \"DELETE\",\n      headers: {\n        \"Content-Type\": \"x-www-form-urlencoded\",\n        \"Accept\": \"*/*\",\n      }\n    }\n  );\n  const comments = await response.json();\n  return comments;\n}\n\nexport {\n  getPosts,\n  savePost,\n  deletePost,\n  updatePost,\n  getComments,\n  logIn,\n  logOut,\n  createUser,\n  getUser,\n  saveComment,\n  updateComment,\n  deleteComment,\n};\n","import React, { useContext, useState } from \"react\";\nimport { updateComment, deleteComment } from \"../blogApi\";\nimport { UserContext } from \"../App\";\n\nexport default function Comment({ id, text, author, date }) {\n  const [editable, setEditable] = useState(false);\n  const [error, setError] = useState(null);\n  const [inputText, setInputText] = useState(text);\n  const [deleted, setDeleted] = useState(false);\n  const user = useContext(UserContext);\n\n  const handleDeleteComment = () => {\n    deleteComment(user, id)\n      .then(setDeleted(true))\n      .catch((err) => setError((prev) => err))\n      .finally(() => setEditable(false));\n  };\n  const handleUpdateComment = (e) => {\n    const text = e.target.form[0].value;\n    updateComment(id, user, text)\n      .then((response) => {\n        setInputText((prev) => text);\n      })\n      .catch((err) => setError((prev) => error))\n      .finally(() => setEditable((prev) => false));\n  };\n  return (\n    <div\n      key={id}\n      className={`${\n        deleted ? \"hidden\" : \"flex\"\n      } container w-full p-5 pr-10 max-h-42 mb-3 grid items-center justify-center bg-red-400 rounded-full text-white`}\n    >\n      <form className=\"md:w-full\">\n        <div className=\"my-2 w-full max-h-40 flex flex-wrap items-start justify-center \">\n          <h1 className=\"w-full mb-2 text-white font-sans font-medium overflow-scroll text-md\">\n            {author.username}:\n          </h1>\n          {editable ? (\n            <textarea\n              defaultValue={text}\n              className=\"w-full max-h-20 h-full overflow-scroll font-serif text-black text-justify\"\n            />\n          ) : (\n            <div className=\"w-full max-h-42 flex flex-wrap  items-start justify-center \">\n              <p className=\"flex md:w-96 sm:96 ml-4 max-h-16 h-full overflow-scroll font-serif text-justify\">\n                {inputText}\n              </p>\n            </div>\n          )}\n        </div>\n        <div className=\"flex md:flex-nowrap flex-wrap mt-2 w-full md:justify-between justify-center\">\n          {editable ? (\n            <div className=\"w-20 ml-4 max-h-16 h-full\"> </div>\n          ) : (\n            <p className=\"flex justify-start mt-1 md:w-full  w-full font-serif text-sm text-center\">\n              {date}\n            </p>\n          )}\n          <div className=\"flex flex-nowrap w-1/3 justify-center md:justify-end\">\n            <button\n              onClick={\n                editable\n                  ? handleUpdateComment\n                  : () => setEditable((prev) => true)\n              }\n              type=\"button\"\n              className=\"p-1 h-7 mb-1 mx-1 flex rounded-full bg-white px-5 text-sm text-red-400\"\n            >\n              {editable ? \"Save\" : \"Edit\"}\n            </button>\n            <button\n              onClick={handleDeleteComment}\n              type=\"button\"\n              className=\"p-1 h-7 flex rounded-full bg-white px-3 text-sm text-red-400\"\n            >\n              Delete\n            </button>\n          </div>\n        </div>\n      </form>\n    </div>\n  );\n}\n","import React, { useContext } from \"react\";\nimport { useState } from \"react\";\nimport { saveComment } from \"../blogApi\";\nimport { UserContext } from \"../App\";\n\nexport default function NewComment({postid, setNewComment }) {\n  const [error, setError] = useState(false);\n  const user = useContext(UserContext);\n\n  const createComment = (e) => {\n    const text = e.target.form[0].value;\n    saveComment(postid, user.token, text)\n      .then((response) => {\n        setNewComment((prev) => false);\n      })\n      .catch((err) => {\n        setError((prev) => err);\n      });\n  };\n\n  const cancelComment = () => {\n    setNewComment((prev) => false);\n  };\n\n  return (\n    <div\n      className={\n        \"container w-full sm:py-3 sm:px-9 px-5 py-5 max-h-52 mb-3 md:w-5/6 flex flex-wrap items-center sm:justify-center bg-red-400 rounded-full text-white\"\n      }\n    >\n      <form className=\"flex w-full max-h-52 justify-center flex-wrap\">\n        <div className=\"w-full max-h-52 flex flex-wrap items-center justify-center\">\n          <textarea className=\"w-96 sm:mt-5 max-h-20 h-full overflow-scroll font-serif text-black text-justify\" />\n          <div className=\"flex sm:flex-wrap md:justify-end justify-center items-center sm:h-1/4 w-full mx-5\">\n            <button\n              type=\"button\"\n              onClick={createComment}\n              className=\"p-1 my-2 flex rounded-full bg-white px-2 text-sm text-red-400\"\n            >\n              Save\n            </button>\n            <button\n              type=\"button\"\n              onClick={cancelComment}\n              className=\"p-1 my-2 ml-2 flex rounded-full bg-white px-2 text-sm text-red-400\"\n            >\n              Cancel\n            </button>\n          </div>\n        </div>\n      </form>\n    </div>\n  );\n}\n","import React from \"react\";\n\nexport default function Button ({type,label, onClick}){\n\treturn (\n        <button\n          type={type}\n          onClick={onClick}\n          className=\"p-1 mt-3 mx-full flex rounded-full bg-red-400 px-2 text-sm text-white\"\n        >\n          {label}\n        </button>\n      );\n}","import * as React from \"react\";\nimport { useState,useContext } from \"react\";\nimport IconButton from \"@mui/material/IconButton\";\nimport Menu from \"@mui/material/Menu\";\nimport MenuItem from \"@mui/material/MenuItem\";\nimport MoreVertIcon from \"@mui/icons-material/MoreVert\";\nimport { updatePost, deletePost } from \"../blogApi\";\nimport { UserContext } from \"../App\";\n\nconst ITEM_HEIGHT = 48;\n\nexport default function MoreMenu({ postId, isPublished , setDeleted}) {\n  const [anchorEl, setAnchorEl] = useState(null);\n  const [published, setPublished] = useState(isPublished);\n  const user = useContext(UserContext);\n  const open = Boolean(anchorEl);\n\n  const options = [\"Delete\", published ? \"Unpublish\" : \"Publish\"];\n\n  const handleClick = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n  const handleClose = (event) => {\n    setAnchorEl(null);\n    console.log(published)\n    console.log(event.target.innerText)\n    if (\n      event.target.innerText === \"Publish\" ||\n      event.target.innerText === \"Unpublish\"\n    ) {\n      console.log(published)\n      console.log(event.target.innerText)\n      updatePost(user.token, postId, !published)\n        .then(setPublished((prev) => !prev))\n        .catch((error) => console.log(error));\n    }\n    else if (event.target.innerText === options[0]){\n      deletePost(user.token, postId).catch((error) => console.log(error)).then(\n      () => setDeleted(prev => true))\n    }\n  };\n  return (\n    <div className=\"color-red-400\">\n      <IconButton\n        aria-label=\"more\"\n        id=\"long-button\"\n        aria-controls=\"menu\"\n        aria-expanded={open ? \"true\" : undefined}\n        aria-haspopup=\"true\"\n        onClick={handleClick}\n        sx={{ color: \"rgba(248, 113, 113)\" }}\n      >\n        <MoreVertIcon />\n      </IconButton>\n      <Menu\n        id=\"long-menu\"\n        MenuListProps={{\n          \"aria-labelledby\": \"long-button\",\n        }}\n        anchorEl={anchorEl}\n        open={open}\n        onClose={handleClose}\n        PaperProps={{\n          style: {\n            maxHeight: ITEM_HEIGHT * 4.5,\n            width: \"20ch\",\n          },\n        }}\n      >\n        {options.map((option) => (\n          <MenuItem\n            key={option}\n            selected={option === \"Pyxis\"}\n            onClick={handleClose}\n          >\n            {option}\n          </MenuItem>\n        ))}\n      </Menu>\n    </div>\n  );\n}\n","\nimport React from \"react\";\nimport { useState, useEffect, useContext } from \"react\";\nimport Comment from \"./Comment\";\nimport { getComments } from \"../blogApi\";\nimport NewComment from \"./NewComment\";\nimport { UserContext } from \"../App\";\nimport Button from \"./Button\";\nimport MoreMenu from \"./MoreMenu\";\n\nexport default function Post({\n  postId,\n  title,\n  text,\n  date,\n  isPublished,\n  html,\n  preview,\n}) {\n  const [comments, setComments] = useState([]);\n  const [newComment, setNewComment] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(false);\n  const [showComments, setShowComments] = useState(false);\n  const [deleted, setDeleted] = useState(false);\n  const user = useContext(UserContext);\n\n  useEffect(() => {\n    if (showComments && user) {\n      getComments(postId, user.token)\n        .then((response) => {\n          setComments((prev) => response);\n        })\n        .catch((err) => {\n          setError((prev) => true);\n        })\n        .finally(() => {\n          setLoading((prev) => false);\n        });\n    }\n    return () => setError((prev) => false);\n  }, [postId, showComments, user]);\n\n  const renderComments = () => {\n    if (loading) return <div className=\"loader\"></div>;\n    else if (error) {\n      return \"Failed to load comments.\";\n    } else if (!comments.length) {\n      return \"No comments yet.\";\n    } else {\n      return comments.map((comment) => {\n        const date = new Date(comment.updatedAt);\n        return (\n          <div\n            key={comment._id}\n            className=\"flex flex-wrap w-full justify-start\"\n          >\n            <Comment\n              id={comment._id}\n              author={comment.author}\n              text={comment.text}\n              date={date.toDateString()}\n            />\n          </div>\n        );\n      });\n    }\n  };\n\n  const renderNewComment = () => {\n    if (!!user && newComment) {\n      return <NewComment postid={postId} setNewComment={setNewComment} />;\n    } else if (!!user) {\n      return (\n        <Button\n          onClick={preview ? () => {} : () => setNewComment((prev) => !prev)}\n          label=\"New Comment\"\n        />\n      );\n    } else return null;\n  };\n  return (\n    deleted ? null : <div className=\"dark:bg-gray-700 container mt-10 md:w-2/3 flex flex-wrap items-center justify-center bg-white\">\n      <div className=\"container mt-10 flex flex-wrap justify-center items-center\">\n        <div className=\"flex flex-row no-wrap items-center w-full\">\n          <h1 className=\"w-full my-10 text-center text-red-400 font-sans font-bold text-4xl\">\n            {title}\n          </h1>\n          <div className=\"justify-self-end\">\n            {!!user ? (\n              <MoreMenu\n                isPublished={isPublished}\n                postId={postId}\n                setDeleted={setDeleted}\n              />\n            ) : null}\n          </div>\n        </div>\n        <p className=\"dark:text-gray-200 w-full font-serif text-justify min-h-70\">\n          {!!html ? <div dangerouslySetInnerHTML={{ __html: html }} /> : text}\n        </p>\n        <p className=\"w-full font-serif underline-red-500\">\n          <mark className=\"bg-red-400 px-2 text-sm text-white\">{date}</mark>\n        </p>\n      </div>\n      <div className=\"flex flex-wrap w-full\">\n        {renderNewComment()}\n        <div className=\"w-full\">\n          {!!user ? (\n            <Button\n              onClick={\n                preview ? () => {} : () => setShowComments((prev) => !prev)\n              }\n              label={showComments ? \"Hide comments\" : \"See comments\"}\n            />\n          ) : null}\n          {showComments && !!user ? renderComments() : null}\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React from \"react\";\n\nexport default function User({ setShow }) {\n  return (\n    <div className=\"absolute sm:right-12 right-4  top-0\">\n      <div\n        onClick={() => setShow((prev) => !prev)}\n        className=\"flex flex-wrap justify-center w-full\"\n      >\n        <svg\n          xmlns=\"http://www.w3.org/2000/svg\"\n          className=\"sm:h-10 sm:w-10 h-7 w-7 absolute right-1 top-8\"\n          viewBox=\"0 0 20 20\"\n          fill=\"currentColor\"\n        >\n          <path\n            fillRule=\"evenodd\"\n            d=\"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z\"\n            clipRule=\"evenodd\"\n          />\n        </svg>\n      </div>\n    </div>\n  );\n}\n","import React, { useContext, useEffect, useState } from \"react\";\nimport { logIn} from \"../blogApi\";\nimport { UserContext } from \"../App\";\n\nexport default function Login({ setUser }) {\n  \n  const [message, setMesssage] = useState(null);\n  const [response, setResponse] = useState(null);\n  const user = useContext(UserContext);\n\n  const logInUser = (e) => {\n    e.preventDefault()\n    // Login with inserted credentials and setUser\n    logIn({\n      username: e.target.form[0].value,\n      password: e.target.form[1].value,\n    }).then((resolve) => {\n      console.log(resolve)\n      if (resolve && resolve.allow === \"WRITE\"){\n        setUser({\n            user_id: resolve.user_id,\n            username: resolve.username,\n            token: resolve.token,\n            password: e.target.form[1].value,\n          });\n        } else setResponse( prev => \"Log-in failed.\")\n      })\n    };\n\n  const logOutUser = () => {\n    setUser((prev) => null);\n  };\n\n  useEffect( () => {\n    setMesssage( prev => response)\n    return () => setMesssage( prev => null)\n  }, [response])\n\n  return (\n    <div\n      className=\"absolute top-24 right-0 h-30 md:w-1/3 sm:w-40 w-full bg-gray-800 px-5 pb-5 z-10 font-sans text-base text-justify\"\n    >\n      {!!user ? (\n        <div>\n          <p className=\"text-red-400 font-bold text-center mt-4\">\n            {user.username}\n          </p>\n          <button\n            type=\"button\"\n            onClick={(e) => logOutUser(e)}\n            className=\"text-red-400 w-full mb-2\"\n          >\n            Log-out\n          </button>\n        </div>\n      ) : (\n        <form className=\"container flex flex-wrap w-full justify-center items-between\">\n          <input\n            name=\"username\"\n            type=\"email\"\n            placeholder=\"username/mail\"\n            className=\"w-full my-3\"\n          />\n          <input\n            name=\"password\"\n            type=\"password\"\n            placeholder=\"password\"\n            className=\"w-full mb-3\"\n          />\n          <p>{message}</p>\n          <button\n            type=\"button\"\n            onClick={(e) => logInUser(e)}\n            className=\"text-red-400 w-full mb-2\"\n          >\n            Log-in\n          </button>\n        </form>\n      )}\n    </div>\n  );\n}\n","import React from \"react\";\nimport { useState } from \"react\";\n\nexport default function Switch({ bollean_click }) {\n  return (\n    <div className=\"w-full mt-5 mx-10 mb-0 flex justify-end\">\n      <label className=\"switch\">\n        <input onClick={bollean_click} type=\"checkbox\" checked={bollean_click}/>\n        <span className=\"slider round\"></span>\n      </label>\n    </div>\n  );\n}\n","import React, { useContext, useEffect, useCallback, useRef, useState } from \"react\";\nimport { Editor } from \"@tinymce/tinymce-react\";\nimport Button from \"./Button\";\nimport Post from \"./Post\";\nimport {savePost} from \"../blogApi\"\nimport { UserContext } from \"../App\";\n\nconst DEFAULT_TITLE = \"New post title\";\nconst DEFAULT_TEXT = null;\nconst DEFAULT_SAVE = false;\n\nexport default function Tiny() {\n  const [value, setValue] = useState(DEFAULT_TEXT);\n  const [title, setTitle] = useState(DEFAULT_TITLE);\n  const [saveFlag, setSaveFlag] = useState(DEFAULT_SAVE);\n  const user = useContext(UserContext);\n  const editorRef = useRef(null);\n\n  const save = () => {\n    savePost(user.token,title, value, true).then(\n      (resolve, reject) => {\n        if(!reject){\n          setSaveFlag( prev => true)\n        }\n        else console.log(reject)\n      }\n    )\n  }\n  \n  useEffect(() => {\n    if(saveFlag){\n      setTitle( prev => DEFAULT_TITLE);\n      setValue( prev => DEFAULT_TEXT);\n      setSaveFlag( prev => !prev);\n      editorRef.current.setContent(\"\")\n    }\n  },[saveFlag])\n\n  const getDate = () => {\n    const date = new Date();\n    return date.toDateString();\n  };\n\n  return (\n    <>\n    <form action =\"\" className=\"mt-20 flex flex-wrap w-4/5 justify-center\">\n        <input\n          type\n          onChange={(title) => setTitle((prev) => title.target.value)}\n          value={title}\n          className=\"w-fit bg-gray-700 mb-10 text-center text-red-400 font-sans font-bold text-4xl\"\n        />\n        <div className=\"flex flex-wrap justify-center w-4/5 mb-5\">\n          <Editor\n            apiKey= {process.env.REACT_APP_TINY_PASS}\n            onInit={(evt, editor) => (editorRef.current = editor)}\n            value={value}\n            onEditorChange={(newValue, editor) => setValue((prev) => newValue)}\n            init={{\n              height: 600,\n              width: 1000,\n              menubar: false,\n              plugins: [\n                \"advlist autolink lists link image charmap print preview anchor\",\n                \"searchreplace visualblocks code fullscreen\",\n                \"insertdatetime media table paste code help wordcount\",\n              ],\n              toolbar:\n                \"undo redo | formatselect | \" +\n                \"bold italic backcolor | alignleft aligncenter \" +\n                \"alignright alignjustify | bullist numlist outdent indent | \" +\n                \"removeformat | help\",\n              content_style:\n                \"body { font-family:ui-serif, Georgia, Cambria, Times New Roman, Times, serif;line-height: 24px;}\",\n            }}\n          />\n          <div className=\"mt-5 mx-96\">\n            <Button type = \"button\"   onClick={save} label=\"Save\" />\n          </div>\n        </div>\n        <Post preview={true} title={title} html={value} date={getDate()} />\n      </form>\n    </>\n  );\n}\n","import React from \"react\";\nimport Post from \"./Components/Post\";\nimport User from \"./Components/User\";\nimport Login from \"./Components/Login\";\nimport { getPosts } from \"./blogApi\";\nimport { useEffect, useState } from \"react\";\n//import NewPost from \"./Components/NewPost\";\nimport Switch from \"./Components/Switch\";\nimport Tiny from \"./Components/Tiny\";\n\nconst UserContext = React.createContext(null);\n\nfunction decodeHtml(html) {\n  var txt = document.createElement(\"textarea\");\n  txt.innerHTML = html;\n  return txt.value;\n}\n\nconst isHtml = (txt) => {\n  const htmlParser = new DOMParser();\n  const parsedText = htmlParser.parseFromString(\n    \"<div>\" + decodeHtml(txt) + \"</div>\",\n    \"text/xml\"\n  );\n  return !!!parsedText.querySelector(\"parsererror\");\n};\n\nfunction App() {\n  const [posts, setPosts] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(false);\n  const [show, setShow] = useState(false);\n  const [user, setUser] = useState(null);\n  const [theme, setTheme] = useState(\n    window.matchMedia(\"(prefers-color-scheme: dark)\").matches\n  );\n\n  useEffect(() => {\n    getPosts()\n      .then((response) => {\n        setPosts((prev) => response);\n      })\n      .catch((err) => {\n        setError((prev) => err);\n      })\n      .finally(() => {\n        setLoading((prev) => false);\n      });\n  }, []);\n\n  const renderPosts = () => {\n    if (loading) return <div className=\"loader\"></div>;\n    else if (error) {\n      return <p>\"Failed to load posts.\"</p>;\n    } else {\n      return posts.map((post) => {\n        const date = new Date(post.updatedAt);\n        if (isHtml(post.text)) {\n          return (\n            <div key={post._id} className=\"flex flex-wrap w-4/5 justify-center\">\n              <Post\n                key={post._id}\n                postId={post._id}\n                title={post.title}\n                html={post.text}\n                isPublished={post.isPublished}\n                date={date.toDateString()}\n              />\n            </div>\n          );\n        } else {\n          return (\n            <div key={post._id} className=\"flex flex-wrap w-4/5 justify-center\">\n              <Post\n                postId={post._id}\n                title={post.title}\n                text={post.text}\n                isPublished={post.isPublished}\n                date={date.toDateString()}\n              />\n            </div>\n          );\n        }\n      });\n    }\n  };\n  return (\n    <UserContext.Provider value={user}>\n      <div\n        className={`${\n          theme ? \"dark\" : null\n        } w-screen min-h-screen h-full  flex flex-wrap justify-center justify-items-center`}\n      >\n        <header className=\"flex pl-5 items-center justify-between font-sans text-2xl font-bold text-red-400 bg-gray-800 h-24 w-full\">\n          I'm a Blogger now\n          <User setShow={setShow} />\n        </header>\n        {show ? <Login setUser={setUser} /> : null}\n        <div className=\"dark:bg-gray-700 min-h-screen h-full self-center w-full flex flex-wrap justify-center justify-items-center font-sans\">\n          <Switch bollean_click={() => setTheme((prev) => !prev)} />\n          {user ? <Tiny /> : null}\n          {renderPosts()}\n        </div>\n      </div>\n    </UserContext.Provider>\n  );\n}\n\nexport { App, UserContext };\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport { App } from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}