(this["webpackJsonpblog-admin"]=this["webpackJsonpblog-admin"]||[]).push([[0],{112:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),s=n(27),a=n.n(s),l=(n(81),n(6)),u=n(11),o=n.n(u),i=n(20),f=n(83);function d(){return(d=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.post("https://gentle-refuge-60877.herokuapp.com/v1/users/login",{username:t.username,password:t.password});case 3:return n=e.sent,e.abrupt("return",n.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function j(){return(j=Object(i.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://gentle-refuge-60877.herokuapp.com/v1/allPosts",{method:"GET",headers:{"Content-Type":"application/json",Accept:"*/*",Credentials:"include"}});case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(){return(p=Object(i.a)(o.a.mark((function e(t,n,r,c){var s,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://gentle-refuge-60877.herokuapp.com/v1/posts",{method:"POST",headers:{"Content-Type":"application/json",Accept:"*/*",Credentials:"true",Authorization:"Bearer "+t},body:JSON.stringify({title:n,text:r,isPublished:c})}).catch((function(e){return console.log(e)}));case 2:return s=e.sent,e.next=5,s.json().catch((function(e){return console.log(e)}));case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(){return(m=Object(i.a)(o.a.mark((function e(t,n){var r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://gentle-refuge-60877.herokuapp.com/v1/posts/".concat(n),{method:"DELETE",headers:{"Content-Type":"application/json",Accept:"*/*",Credentials:"true",Authorization:"Bearer "+t}}).catch((function(e){return console.log(e)}));case 2:return r=e.sent,e.next=5,r.json().catch((function(e){return console.log(e)}));case 5:return c=e.sent,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(){return(x=Object(i.a)(o.a.mark((function e(t,n,r){var c,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://gentle-refuge-60877.herokuapp.com/v1/posts/".concat(n),{method:"PUT",headers:{"Content-Type":"application/json",Accept:"*/*",Credentials:"true",Authorization:"Bearer "+t},body:JSON.stringify({isPublished:r})}).catch((function(e){return console.log(e)}));case 2:return c=e.sent,e.next=5,c.json().catch((function(e){return console.log(e)}));case 5:return s=e.sent,e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(){return(b=Object(i.a)(o.a.mark((function e(t,n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://gentle-refuge-60877.herokuapp.com/v1/comments/?postid=".concat(encodeURIComponent(t)),{method:"GET",headers:{"Content-Type":"application/json",Accept:"*/*",Credentials:"include",Authorization:"Bearer "+n}});case 2:return r=e.sent,e.abrupt("return",r.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(){return(h=Object(i.a)(o.a.mark((function e(t,n,r){var c,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://gentle-refuge-60877.herokuapp.com/v1/comments/?postid=".concat(t),{method:"POST",headers:{"Content-Type":"application/json",Accept:"*/*",Credentials:"true",Authorization:"Bearer "+n},body:JSON.stringify({text:r})}).catch((function(e){return console.log(e)}));case 2:return c=e.sent,e.next=5,c.json().catch((function(e){return console.log(e)}));case 5:return s=e.sent,e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){return(O=Object(i.a)(o.a.mark((function e(t,n,r){var c,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://gentle-refuge-60877.herokuapp.com/v1/comments/".concat(t,"/?username=").concat(encodeURIComponent(n.username),"&password=").concat(encodeURIComponent(n.password)),{method:"PUT",headers:{"Content-Type":"application/json",Accept:"*/*"},body:JSON.stringify({text:r,author:n.user_id})}).catch((function(e){return console.log(e)}));case 2:return c=e.sent,e.next=5,c.json().catch((function(e){return console.log(e)}));case 5:return s=e.sent,e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return(w=Object(i.a)(o.a.mark((function e(t,n){var r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://gentle-refuge-60877.herokuapp.com/v1/comments/".concat(encodeURIComponent(n),"/?username=").concat(encodeURIComponent(t.username),"&password=").concat(encodeURIComponent(t.password)),{method:"DELETE",headers:{"Content-Type":"x-www-form-urlencoded",Accept:"*/*"}});case 2:return r=e.sent,e.next=5,r.json();case 5:return c=e.sent,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var v=n(1);function g(e){var t=e.id,n=e.text,c=e.author,s=e.date,a=Object(r.useState)(!1),u=Object(l.a)(a,2),o=u[0],i=u[1],f=Object(r.useState)(null),d=Object(l.a)(f,2),j=d[0],p=d[1],m=Object(r.useState)(n),x=Object(l.a)(m,2),b=x[0],h=x[1],g=Object(r.useState)(!1),y=Object(l.a)(g,2),N=y[0],k=y[1],C=Object(r.useContext)(B);return Object(v.jsx)("div",{className:"".concat(N?"hidden":"flex"," container w-full p-5 pr-10 max-h-42 mb-3 grid items-center justify-center bg-red-400 rounded-full text-white"),children:Object(v.jsxs)("form",{className:"md:w-full",children:[Object(v.jsxs)("div",{className:"my-2 w-full max-h-40 flex flex-wrap items-start justify-center ",children:[Object(v.jsxs)("h1",{className:"w-full mb-2 text-white font-sans font-medium overflow-scroll text-md",children:[c.username,":"]}),o?Object(v.jsx)("textarea",{defaultValue:n,className:"w-full max-h-20 h-full overflow-scroll font-serif text-black text-justify"}):Object(v.jsx)("div",{className:"w-full max-h-42 flex flex-wrap  items-start justify-center ",children:Object(v.jsx)("p",{className:"flex md:w-96 sm:96 ml-4 max-h-16 h-full overflow-scroll font-serif text-justify",children:b})})]}),Object(v.jsxs)("div",{className:"flex md:flex-nowrap flex-wrap mt-2 w-full md:justify-between justify-center",children:[o?Object(v.jsx)("div",{className:"w-20 ml-4 max-h-16 h-full",children:" "}):Object(v.jsx)("p",{className:"flex justify-start mt-1 md:w-full  w-full font-serif text-sm text-center",children:s}),Object(v.jsxs)("div",{className:"flex flex-nowrap w-1/3 justify-center md:justify-end",children:[Object(v.jsx)("button",{onClick:o?function(e){var n=e.target.form[0].value;(function(e,t,n){return O.apply(this,arguments)})(t,C,n).then((function(e){h((function(e){return n}))})).catch((function(e){return p((function(e){return j}))})).finally((function(){return i((function(e){return!1}))}))}:function(){return i((function(e){return!0}))},type:"button",className:"p-1 h-7 mb-1 mx-1 flex rounded-full bg-white px-5 text-sm text-red-400",children:o?"Save":"Edit"}),Object(v.jsx)("button",{onClick:function(){(function(e,t){return w.apply(this,arguments)})(C,t).then(k(!0)).catch((function(e){return p((function(t){return e}))})).finally((function(){return i(!1)}))},type:"button",className:"p-1 h-7 flex rounded-full bg-white px-3 text-sm text-red-400",children:"Delete"})]})]})]})},t)}function y(e){var t=e.postid,n=e.setNewComment,c=Object(r.useState)(!1),s=Object(l.a)(c,2),a=(s[0],s[1]),u=Object(r.useContext)(B);return Object(v.jsx)("div",{className:"container w-full sm:py-3 sm:px-9 px-5 py-5 max-h-52 mb-3 md:w-5/6 flex flex-wrap items-center sm:justify-center bg-red-400 rounded-full text-white",children:Object(v.jsx)("form",{className:"flex w-full max-h-52 justify-center flex-wrap",children:Object(v.jsxs)("div",{className:"w-full max-h-52 flex flex-wrap items-center justify-center",children:[Object(v.jsx)("textarea",{className:"w-96 sm:mt-5 max-h-20 h-full overflow-scroll font-serif text-black text-justify"}),Object(v.jsxs)("div",{className:"flex sm:flex-wrap md:justify-end justify-center items-center sm:h-1/4 w-full mx-5",children:[Object(v.jsx)("button",{type:"button",onClick:function(e){var r=e.target.form[0].value;(function(e,t,n){return h.apply(this,arguments)})(t,u.token,r).then((function(e){n((function(e){return!1}))})).catch((function(e){a((function(t){return e}))}))},className:"p-1 my-2 flex rounded-full bg-white px-2 text-sm text-red-400",children:"Save"}),Object(v.jsx)("button",{type:"button",onClick:function(){n((function(e){return!1}))},className:"p-1 my-2 ml-2 flex rounded-full bg-white px-2 text-sm text-red-400",children:"Cancel"})]})]})})})}function N(e){var t=e.type,n=e.label,r=e.onClick;return Object(v.jsx)("button",{type:t,onClick:r,className:"p-1 mt-3 mx-full flex rounded-full bg-red-400 px-2 text-sm text-white",children:n})}var k=n(148),C=n(144),S=n(146),T=n(68),P=n.n(T);function E(e){var t=e.postId,n=e.isPublished,c=e.setDeleted,s=Object(r.useState)(null),a=Object(l.a)(s,2),u=a[0],o=a[1],i=Object(r.useState)(n),f=Object(l.a)(i,2),d=f[0],j=f[1],p=Object(r.useContext)(B),b=Boolean(u),h=["Delete",d?"Unpublish":"Publish"],O=function(e){o(null),console.log(d),console.log(e.target.innerText),"Publish"===e.target.innerText||"Unpublish"===e.target.innerText?(console.log(d),console.log(e.target.innerText),function(e,t,n){return x.apply(this,arguments)}(p.token,t,!d).then(j((function(e){return!e}))).catch((function(e){return console.log(e)}))):e.target.innerText===h[0]&&function(e,t){return m.apply(this,arguments)}(p.token,t).catch((function(e){return console.log(e)})).then((function(){return c((function(e){return!0}))}))};return Object(v.jsxs)("div",{className:"color-red-400",children:[Object(v.jsx)(k.a,{"aria-label":"more",id:"long-button","aria-controls":"menu","aria-expanded":b?"true":void 0,"aria-haspopup":"true",onClick:function(e){o(e.currentTarget)},sx:{color:"rgba(248, 113, 113)"},children:Object(v.jsx)(P.a,{})}),Object(v.jsx)(C.a,{id:"long-menu",MenuListProps:{"aria-labelledby":"long-button"},anchorEl:u,open:b,onClose:O,PaperProps:{style:{maxHeight:216,width:"20ch"}},children:h.map((function(e){return Object(v.jsx)(S.a,{selected:"Pyxis"===e,onClick:O,children:e},e)}))})]})}function I(e){var t=e.postId,n=e.title,c=e.text,s=e.date,a=e.isPublished,u=e.html,o=e.preview,i=Object(r.useState)([]),f=Object(l.a)(i,2),d=f[0],j=f[1],p=Object(r.useState)(!1),m=Object(l.a)(p,2),x=m[0],h=m[1],O=Object(r.useState)(!0),w=Object(l.a)(O,2),k=w[0],C=w[1],S=Object(r.useState)(!1),T=Object(l.a)(S,2),P=T[0],I=T[1],A=Object(r.useState)(!1),D=Object(l.a)(A,2),_=D[0],U=D[1],R=Object(r.useState)(!1),z=Object(l.a)(R,2),L=z[0],M=z[1],J=Object(r.useContext)(B);Object(r.useEffect)((function(){return _&&J&&function(e,t){return b.apply(this,arguments)}(t,J.token).then((function(e){j((function(t){return e}))})).catch((function(e){I((function(e){return!0}))})).finally((function(){C((function(e){return!1}))})),function(){return I((function(e){return!1}))}}),[t,_,J]);return L?null:Object(v.jsxs)("div",{className:"dark:bg-gray-700 container mt-10 md:w-2/3 flex flex-wrap items-center justify-center bg-white",children:[Object(v.jsxs)("div",{className:"container mt-10 flex flex-wrap justify-center items-center",children:[Object(v.jsxs)("div",{className:"flex flex-row no-wrap items-center w-full",children:[Object(v.jsx)("h1",{className:"w-full my-10 text-center text-red-400 font-sans font-bold text-4xl",children:n}),Object(v.jsx)("div",{className:"justify-self-end",children:J?Object(v.jsx)(E,{isPublished:a,postId:t,setDeleted:M}):null})]}),Object(v.jsx)("p",{className:"dark:text-gray-200 w-full font-serif text-justify min-h-70",children:u?Object(v.jsx)("div",{dangerouslySetInnerHTML:{__html:u}}):c}),Object(v.jsx)("p",{className:"w-full font-serif underline-red-500",children:Object(v.jsx)("mark",{className:"bg-red-400 px-2 text-sm text-white",children:s})})]}),Object(v.jsxs)("div",{className:"flex flex-wrap w-full",children:[J&&x?Object(v.jsx)(y,{postid:t,setNewComment:h}):J?Object(v.jsx)(N,{onClick:o?function(){}:function(){return h((function(e){return!e}))},label:"New Comment"}):null,Object(v.jsxs)("div",{className:"w-full",children:[J?Object(v.jsx)(N,{onClick:o?function(){}:function(){return U((function(e){return!e}))},label:_?"Hide comments":"See comments"}):null,_&&J?k?Object(v.jsx)("div",{className:"loader"}):P?"Failed to load comments.":d.length?d.map((function(e){var t=new Date(e.updatedAt);return Object(v.jsx)("div",{className:"flex flex-wrap w-full justify-start",children:Object(v.jsx)(g,{id:e._id,author:e.author,text:e.text,date:t.toDateString()})},e._id)})):"No comments yet.":null]})]})]})}function A(e){var t=e.setShow;return Object(v.jsx)("div",{className:"absolute sm:right-12 right-4  top-0",children:Object(v.jsx)("div",{onClick:function(){return t((function(e){return!e}))},className:"flex flex-wrap justify-center w-full",children:Object(v.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"sm:h-10 sm:w-10 h-7 w-7 absolute right-1 top-8",viewBox:"0 0 20 20",fill:"currentColor",children:Object(v.jsx)("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})})})})}function D(e){var t=e.setUser,n=Object(r.useState)(null),c=Object(l.a)(n,2),s=c[0],a=c[1],u=Object(r.useState)(null),o=Object(l.a)(u,2),i=o[0],f=o[1],j=Object(r.useContext)(B),p=function(e){e.preventDefault(),function(e){return d.apply(this,arguments)}({username:e.target.form[0].value,password:e.target.form[1].value}).then((function(n){console.log(n),n&&"WRITE"===n.allow?t({user_id:n.user_id,username:n.username,token:n.token,password:e.target.form[1].value}):f((function(e){return"Log-in failed."}))}))};return Object(r.useEffect)((function(){return a((function(e){return i})),function(){return a((function(e){return null}))}}),[i]),Object(v.jsx)("div",{className:"absolute top-24 right-0 h-30 md:w-1/3 sm:w-40 w-full bg-gray-800 px-5 pb-5 z-10 font-sans text-base text-justify",children:j?Object(v.jsxs)("div",{children:[Object(v.jsx)("p",{className:"text-red-400 font-bold text-center mt-4",children:j.username}),Object(v.jsx)("button",{type:"button",onClick:function(e){t((function(e){return null}))},className:"text-red-400 w-full mb-2",children:"Log-out"})]}):Object(v.jsxs)("form",{className:"container flex flex-wrap w-full justify-center items-between",children:[Object(v.jsx)("input",{name:"username",type:"email",placeholder:"username/mail",className:"w-full my-3"}),Object(v.jsx)("input",{name:"password",type:"password",placeholder:"password",className:"w-full mb-3"}),Object(v.jsx)("p",{children:s}),Object(v.jsx)("button",{type:"button",onClick:function(e){return p(e)},className:"text-red-400 w-full mb-2",children:"Log-in"})]})})}function _(e){var t=e.bollean_click;return Object(v.jsx)("div",{className:"w-full mt-5 mx-10 mb-0 flex justify-end",children:Object(v.jsxs)("label",{className:"switch",children:[Object(v.jsx)("input",{onClick:t,type:"checkbox",checked:t}),Object(v.jsx)("span",{className:"slider round"})]})})}var U=n(69),R="New post title";function z(){var e=Object(r.useState)(null),t=Object(l.a)(e,2),n=t[0],c=t[1],s=Object(r.useState)(R),a=Object(l.a)(s,2),u=a[0],o=a[1],i=Object(r.useState)(false),f=Object(l.a)(i,2),d=f[0],j=f[1],m=Object(r.useContext)(B),x=Object(r.useRef)(null);Object(r.useEffect)((function(){d&&(o((function(e){return R})),c((function(e){return null})),j((function(e){return!e})),x.current.setContent(""))}),[d]);return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)("form",{action:"",className:"mt-20 flex flex-wrap w-4/5 justify-center",children:[Object(v.jsx)("input",{type:!0,onChange:function(e){return o((function(t){return e.target.value}))},value:u,className:"w-fit bg-gray-700 mb-10 text-center text-red-400 font-sans font-bold text-4xl"}),Object(v.jsxs)("div",{className:"flex flex-wrap justify-center w-4/5 mb-5",children:[Object(v.jsx)(U.a,{apiKey:"4v257mskas6ptum94kunxyqukzez33g6yoxn2lopehctvjkw",onInit:function(e,t){return x.current=t},value:n,onEditorChange:function(e,t){return c((function(t){return e}))},init:{height:600,width:1e3,menubar:!1,plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code help wordcount"],toolbar:"undo redo | formatselect | bold italic backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | help",content_style:"body { font-family:ui-serif, Georgia, Cambria, Times New Roman, Times, serif;line-height: 24px;}"}}),Object(v.jsx)("div",{className:"mt-5 mx-96",children:Object(v.jsx)(N,{type:"button",onClick:function(){(function(e,t,n,r){return p.apply(this,arguments)})(m.token,u,n,!0).then((function(e,t){t?console.log(t):j((function(e){return!0}))}))},label:"Save"})})]}),Object(v.jsx)(I,{preview:!0,title:u,html:n,date:(new Date).toDateString()})]})})}var B=c.a.createContext(null);var L=function(e){return!(new DOMParser).parseFromString("<div>"+function(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value}(e)+"</div>","text/xml").querySelector("parsererror")};function M(){var e=Object(r.useState)(null),t=Object(l.a)(e,2),n=t[0],c=t[1],s=Object(r.useState)(!0),a=Object(l.a)(s,2),u=a[0],o=a[1],i=Object(r.useState)(!1),f=Object(l.a)(i,2),d=f[0],p=f[1],m=Object(r.useState)(!1),x=Object(l.a)(m,2),b=x[0],h=x[1],O=Object(r.useState)(null),w=Object(l.a)(O,2),g=w[0],y=w[1],N=Object(r.useState)(window.matchMedia("(prefers-color-scheme: dark)").matches),k=Object(l.a)(N,2),C=k[0],S=k[1];Object(r.useEffect)((function(){(function(){return j.apply(this,arguments)})().then((function(e){c((function(t){return e}))})).catch((function(e){p((function(t){return e}))})).finally((function(){o((function(e){return!1}))}))}),[]);return Object(v.jsx)(B.Provider,{value:g,children:Object(v.jsxs)("div",{className:"".concat(C?"dark":null," w-screen min-h-screen h-full  flex flex-wrap justify-center justify-items-center"),children:[Object(v.jsxs)("header",{className:"flex pl-5 items-center justify-between font-sans text-2xl font-bold text-red-400 bg-gray-800 h-24 w-full",children:["I'm a Blogger now",Object(v.jsx)(A,{setShow:h})]}),b?Object(v.jsx)(D,{setUser:y}):null,Object(v.jsxs)("div",{className:"dark:bg-gray-700 min-h-screen h-full self-center w-full flex flex-wrap justify-center justify-items-center font-sans",children:[Object(v.jsx)(_,{bollean_click:function(){return S((function(e){return!e}))}}),g?Object(v.jsx)(z,{}):null,u?Object(v.jsx)("div",{className:"loader"}):d?Object(v.jsx)("p",{children:'"Failed to load posts."'}):n.map((function(e){var t=new Date(e.updatedAt);return L(e.text)?Object(v.jsx)("div",{className:"flex flex-wrap w-4/5 justify-center",children:Object(v.jsx)(I,{postId:e._id,title:e.title,html:e.text,isPublished:e.isPublished,date:t.toDateString()},e._id)},e._id):Object(v.jsx)("div",{className:"flex flex-wrap w-4/5 justify-center",children:Object(v.jsx)(I,{postId:e._id,title:e.title,text:e.text,isPublished:e.isPublished,date:t.toDateString()})},e._id)}))]})]})})}a.a.render(Object(v.jsx)(c.a.StrictMode,{children:Object(v.jsx)(M,{})}),document.getElementById("root"))},81:function(e,t,n){}},[[112,1,2]]]);
//# sourceMappingURL=main.a9f80a43.chunk.js.map